<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add movie</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" th:href="@{/css/background.css}"/>
    <link rel="stylesheet" type="text/css" th:href="@{/css/main.css}"/>
    <link rel="stylesheet" type="text/css" th:href="@{/css/form.css}">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>

<div th:replace="includes/header"></div>

<span th:if="${type=='edit'}" style="display: none;" id="editDay" th:text="${movie.releaseDate.get(movie.releaseDate.DAY_OF_MONTH)}"></span>
<span th:if="${type=='edit'}" style="display: none;" id="editMonth" th:text="${movie.releaseDate.get(movie.releaseDate.MONTH)}"></span>
<span th:if="${type=='edit'}" style="display: none;" id="editYear" th:text="${movie.releaseDate.get(movie.releaseDate.YEAR)}"></span>

<form th:action="'/movie/'+${type=='add'?'add':'edit'}" method="post" th:object="${movie}"
      class="container main mt-5 mb-5 bg-dark main-form">
    <h2 class="d-flex justify-content-center text-light" th:text="${type=='add'?'Add':'Edit'}+' form'"></h2>

    <input type="hidden" th:if="${type=='edit'}" th:field="*{id}">

    <div class="mb-3">
        <label for="nameInput" class="form-label text-light">Name</label>
        <input type="text" class="form-control" id="nameInput" aria-describedby="nameInputDesc" name="name"
               th:field="*{name}" required autocomplete="off">
        <div class="error" th:if="${#fields.hasErrors('name')}" th:errors="*{name}"></div>
    </div>

    <div class="mb-3">
        <label for="directorInput" class="form-label text-light">Director</label>
        <input type="text" class="form-control" id="directorInput" aria-describedby="directorInputDesc" name="director"
               th:field="*{director}" required autocomplete="off">
        <div class="error" th:if="${#fields.hasErrors('director')}" th:errors="*{director}"></div>
    </div>

    <div class="mb-3">
        <label for="actorsInput" class="form-label text-light">Actors</label>
        <input type="text" class="form-control" id="actorsInput" aria-describedby="actorsInputDesc" name="actors"
               th:field="*{actors}" required autocomplete="off">
        <div class="error" th:if="${#fields.hasErrors('actors')}" th:errors="*{actors}"></div>
    </div>

    <div class="mb-3">
        <label for="ageRatingInput" class="form-label text-light">Age rating</label>
        <input type="number" class="form-control" id="ageRatingInput" aria-describedby="ageRatingInputDesc"
               name="ageRating"
               th:field="*{ageRating}" required autocomplete="off">
        <div class="error" th:if="${#fields.hasErrors('ageRating')}" th:errors="*{ageRating}"></div>
    </div>

    <div class="mb-3">
        <label for="descriptionInput" class="form-label text-light">Description</label>
        <input type="text" class="form-control" id="descriptionInput" aria-describedby="descriptionInputDesc"
               name="description"
               th:field="*{description}" required autocomplete="off">
        <div class="error" th:if="${#fields.hasErrors('description')}" th:errors="*{description}"></div>
    </div>

    <div class="mb-3">
        <label for="imgUrlInput" class="form-label text-light">Image URL</label>
        <input type="text" class="form-control" id="imgUrlInput" aria-describedby="imgUrlInputDesc" name="imgUrl"
               th:field="*{imgUrl}" required autocomplete="off">
        <div class="error" th:if="${#fields.hasErrors('imgUrl')}" th:errors="*{imgUrl}"></div>
    </div>

    <div class="mb-3">
        <label for="trailerUrlInput" class="form-label">Trailer URL</label>
        <input type="text" class="form-control" id="trailerUrlInput" aria-describedby="trailerUrlInputDesc" name="trailerUrl"
               th:field="*{trailerUrl}" required autocomplete="off">
        <div class="error" th:if="${#fields.hasErrors('trailerUrl')}" th:errors="*{trailerUrl}"></div>
    </div>

    <p class="text-light">Release date</p>
    <div th:replace="includes/datePicker"></div>

    <div class="mb-3">
        <p class="text-light">Genres</p>
        <div th:each="genre:${genres}">
            <span class="text-light">
                <input type="checkbox" class="form-check-input" aria-describedby="genreInputDesc" name="genre" th:field="*{genres}"
                       th:value="${genre.id}" th:text="${genre.name}"/>
            </span>
        </div>

    </div>

    <button type="submit" class="btn btn-outline-primary" th:text="${type=='add'?'Add':'Edit'}+' movie'"></button>

</form>

<div th:replace="includes/footer"></div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>
<script th:src="@{/js/date-picker.js}"></script>
<script th:src="@{/js/randomBox.js}"></script>

</body>
</html>