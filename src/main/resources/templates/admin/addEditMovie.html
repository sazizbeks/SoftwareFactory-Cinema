<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add movie</title>
    <link th:replace="includes/bootstrapCSS">
    <link rel="stylesheet" type="text/css" th:href="@{/css/background.css}"/>
    <link rel="stylesheet" type="text/css" th:href="@{/css/main.css}"/>
    <link rel="stylesheet" type="text/css" th:href="@{/css/form.css}">
</head>
<body>

<div th:replace="includes/header"></div>

<span th:if="${type=='edit'}" style="display: none;" id="editDay" th:text="${movie.releaseDate.get(movie.releaseDate.DAY_OF_MONTH)}"></span>
<span th:if="${type=='edit'}" style="display: none;" id="editMonth" th:text="${movie.releaseDate.get(movie.releaseDate.MONTH)}"></span>
<span th:if="${type=='edit'}" style="display: none;" id="editYear" th:text="${movie.releaseDate.get(movie.releaseDate.YEAR)}"></span>

<form th:action="'/movie/'+${type=='add'?'add':'edit'}" method="post" th:object="${movie}"
      class="container main mt-5 mb-5 bg-light main-form">
    <h2 class="d-flex justify-content-center" th:text="${type=='add'?'Add':'Edit'}+' form'"></h2>

    <input type="hidden" th:if="${type=='edit'}" th:field="*{id}">

    <div class="mb-3">
        <label for="nameInput" class="form-label">Name</label>
        <input type="text" class="form-control" id="nameInput" aria-describedby="nameInputDesc" name="name"
               th:field="*{name}" required autocomplete="off">
        <div class="error" th:if="${#fields.hasErrors('name')}" th:errors="*{name}"></div>
    </div>

    <div class="mb-3">
        <label for="directorInput" class="form-label">Director</label>
        <input type="text" class="form-control" id="directorInput" aria-describedby="directorInputDesc" name="director"
               th:field="*{director}" required autocomplete="off">
        <div class="error" th:if="${#fields.hasErrors('director')}" th:errors="*{director}"></div>
    </div>

    <div class="mb-3">
        <label for="actorsInput" class="form-label">Actors</label>
        <input type="text" class="form-control" id="actorsInput" aria-describedby="actorsInputDesc" name="actors"
               th:field="*{actors}" required autocomplete="off">
        <div class="error" th:if="${#fields.hasErrors('actors')}" th:errors="*{actors}"></div>
    </div>

    <div class="mb-3">
        <label for="ageRatingInput" class="form-label">Age rating</label>
        <input type="number" class="form-control" id="ageRatingInput" aria-describedby="ageRatingInputDesc"
               name="ageRating"
               th:field="*{ageRating}" required autocomplete="off">
        <div class="error" th:if="${#fields.hasErrors('ageRating')}" th:errors="*{ageRating}"></div>
    </div>

    <div class="mb-3">
        <label for="descriptionInput" class="form-label">Description</label>
        <input type="text" class="form-control" id="descriptionInput" aria-describedby="descriptionInputDesc"
               name="description"
               th:field="*{description}" required autocomplete="off">
        <div class="error" th:if="${#fields.hasErrors('description')}" th:errors="*{description}"></div>
    </div>

    <div class="mb-3">
        <label for="imgUrlInput" class="form-label">Image URL</label>
        <input type="text" class="form-control" id="imgUrlInput" aria-describedby="imgUrlInputDesc" name="imgUrl"
               th:field="*{imgUrl}" required autocomplete="off">
        <div class="error" th:if="${#fields.hasErrors('imgUrl')}" th:errors="*{imgUrl}"></div>
    </div>

    <p>Release date</p>
    <div th:replace="includes/datePicker"></div>

    <div class="mb-3">
        <p>Genres</p>
        <div th:each="genre:${genres}">
            <input type="checkbox" class="form-check-input" aria-describedby="genreInputDesc" name="genre" th:field="*{genres}"
                 th:value="${genre.id}" th:text="${genre.name}"/>
        </div>

    </div>

    <button type="submit" class="btn btn-primary" th:text="${type=='add'?'Add':'Edit'}+' movie'"></button>

</form>

<div th:replace="includes/footer"></div>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns"
        crossorigin="anonymous"></script>
<script src="/js/date-picker.js"></script>

</body>
</html>